<html>

<head>
	<title>WebGL - Canvas test</title>
	<meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">

	<script type="text/javascript" src="glMatrix.js"></script>
	<script type="text/javascript" src="callbacks.js"></script>
	<script type="text/javascript" src="glCourseBasis.js"></script>

	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

	<script>
		function replay() {
			var slider = document.getElementById("rangeNb");
			nb = slider.value;
			Balls3D.initAll(nb);
		}

		function modifySigma(){
			var sliderSigma = document.getElementById("sigma");
			newSigma = sliderSigma.value;
			
		}

		function resetZoom() {
			deltaZoom = 0.0;
		}

		function resetLightSource(){
			lightSource = [0.0, 0.0, 0.5];
			Light3D.redraw();
		}
		function change_animation_rotation() {
			Balls3D.animationRotation = !Balls3D.animationRotation;
			var button = document.getElementById("anime_button");
			if (Balls3D.animationRotation) {
				button.innerText = "Stop rotation";
			} else {
				button.innerText = "Play rotation";
			}
		}
	</script>

</head>


<body onload="webGLStart();">
	<div class="table-responsive text-nowrap">
		<table class="table" style="width: auto;">
		  <thead>
			<tr>
			  <th scope="col">Options</th>
			  <th scope="col">Rendu</th>
			</tr>
		  </thead>
		  <tbody>
			<tr>
			  <td>
				  <!-- Table des options -->
				  <div class="table-responsive text-nowrap">
					<table class="table">
						<tbody>
							<tr>
								<td>
									<input type="range" min="1" max="200" value="50" class="form-control-range" id="rangeNb">
									<p>Nombre de billes : <span id="displayNb"></span></p>
								</td>
							</tr>
							<tr>
								<td><button class="btn btn-primary" onclick="modifySigma()">Changer nb billes</button></td>
							</tr>
							<tr>
							<tr>
								<td>
									<input type="range" min="0.1" max="1.5" class="form-control-range" id="sigma">
									<p>Sigma <span id="sigma"></span></p>
								</td>
								<td><button class="btn btn-secondary" onclick="change_animation_rotation()" id="anime_button">Play rotation</button></td>
							</tr>
							<tr>
								<td><button class="btn btn-primary" onclick="replay()">Changer sigma</button></td>
							</tr>
							<tr>
								<td><button class="btn btn-secondary" onclick="change_animation_rotation()" id="anime_button">Play rotation</button></td>
							</tr>
							<tr>
								<td><button class="btn btn-secondary"	onclick="resetZoom()">Reset zoom</button></td>
							</tr>
							<tr>
								<td><button class="btn btn-secondary"	onclick="resetLightSource()">Reset lumiere</button></td>
							</tr>
						</tbody>
					</table>
				</div>
			  </td>
			  <td>
				<!-- Rendu WebGL -->
				<canvas id="WebGL-test" style="border:none;" width="800" height="600"></canvas>
			  </td>
			</tr>
		  </tbody>
		</table>
	</div>
	
	<br><br>

	<script>
		var slider = document.getElementById("rangeNb");
		var output = document.getElementById("displayNb");
		output.innerHTML = slider.value;
		slider.oninput = function() {
			output.innerHTML = this.value;
		}

		var sliderSigma = document.getElementById("rangeNb");
		var outputSigma = document.getElementById("displayNb");
		outputSigma.innerHTML = sliderSigma.value;
		sliderSigma.oninput = function() {
			outputSigma.innerHTML = this.value;
		}
	</script>

</body>


</html>
